<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="semhelpinghands">
<title>Bootstrap Confidence Interval for Standardized Solution in lavaan • semhelpinghands</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bootstrap Confidence Interval for Standardized Solution in lavaan">
<meta property="og:description" content="semhelpinghands">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">semhelpinghands</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/semhelpinghands.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/standardizedSolution_boot_ci.html">Bootstrap Confidence Interval for Standardized Solution in lavaan</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sfcheung/semhelpinghands/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="standardizedSolution_boot_ci_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Bootstrap Confidence Interval for Standardized Solution in lavaan</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/semhelpinghands/blob/HEAD/vignettes/standardizedSolution_boot_ci.Rmd" class="external-link"><code>vignettes/standardizedSolution_boot_ci.Rmd</code></a></small>
      <div class="d-none name"><code>standardizedSolution_boot_ci.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-standardizedsolution_boot_ci-does">What <code>standardizedSolution_boot_ci()</code> Does<a class="anchor" aria-label="anchor" href="#what-standardizedsolution_boot_ci-does"></a>
</h2>
<p>In <code>lavaan</code>, if bootstrapping is requested, the standard errors and confidence intervals in the standardized solutions are computed by delta method using the variance-covariance matrix of the bootstrap estimates. The intervals are symmetric about the point estimates and are not the usual bootstrap percentile confidence intervals users expect when bootstrapping is conducted.</p>
<p><code><a href="../reference/standardizedSolution_boot_ci.html">standardizedSolution_boot_ci()</a></code> accepts a <code>lavaan::lavaan-class</code> object fitted with <code>se = "bootstrap"</code> (or <code>se = "boot"</code>) and forms the percentile confidence intervals based on the bootstrap estimates stored in the object.</p>
</div>
<div class="section level2">
<h2 id="data-and-model">Data and Model<a class="anchor" aria-label="anchor" href="#data-and-model"></a>
</h2>
<p>A mediation model example adapted from the official <code>lavaan</code> website is used (<a href="https://lavaan.ugent.be/tutorial/mediation.html" class="external-link uri">https://lavaan.ugent.be/tutorial/mediation.html</a>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; This is lavaan 0.6-12</span></span>
<span><span class="co">#&gt; lavaan is FREE software! Please report any bugs.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">-</span> <span class="fl">.5</span></span>
<span><span class="va">M</span> <span class="op">&lt;-</span> <span class="fl">0.20</span><span class="op">*</span><span class="va">X</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="fl">0.17</span><span class="op">*</span><span class="va">M</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">X</span>, Y <span class="op">=</span> <span class="va">Y</span>, M <span class="op">=</span> <span class="va">M</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">' # direct effect</span></span>
<span><span class="st">             Y ~ c*X</span></span>
<span><span class="st">           # mediator</span></span>
<span><span class="st">             M ~ a*X</span></span>
<span><span class="st">             Y ~ b*M</span></span>
<span><span class="st">           # indirect effect (a*b)</span></span>
<span><span class="st">             ab := a*b</span></span>
<span><span class="st">           # total effect</span></span>
<span><span class="st">             total := c + (a*b)</span></span>
<span><span class="st">         '</span></span></code></pre></div>
<p>This model is fitted with <code>se = "bootstrap"</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">model</span>,</span>
<span>           data <span class="op">=</span> <span class="va">Data</span>,</span>
<span>           se <span class="op">=</span> <span class="st">"bootstrap"</span>,</span>
<span>           bootstrap <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>           parallel <span class="op">=</span><span class="st">"snow"</span>, ncpus <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p>This is the standardized solution with delta-method confidence intervals (results may be different when the code is ran again because seed is not set).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/standardizedSolution.html" class="external-link">standardizedSolution</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;     lhs op     rhs label est.std    se       z pvalue ci.lower ci.upper</span></span>
<span><span class="co">#&gt; 1     Y  ~       X     c   0.018 0.097   0.185  0.853   -0.172    0.207</span></span>
<span><span class="co">#&gt; 2     M  ~       X     a   0.046 0.100   0.456  0.648   -0.150    0.241</span></span>
<span><span class="co">#&gt; 3     Y  ~       M     b   0.102 0.102   1.001  0.317   -0.098    0.302</span></span>
<span><span class="co">#&gt; 4     Y ~~       Y         0.989 0.021  48.205  0.000    0.949    1.029</span></span>
<span><span class="co">#&gt; 5     M ~~       M         0.998 0.009 109.591  0.000    0.980    1.016</span></span>
<span><span class="co">#&gt; 6     X ~~       X         1.000 0.000      NA     NA    1.000    1.000</span></span>
<span><span class="co">#&gt; 7    ab :=     a*b    ab   0.005 0.010   0.448  0.654   -0.016    0.025</span></span>
<span><span class="co">#&gt; 8 total := c+(a*b) total   0.023 0.096   0.234  0.815   -0.167    0.212</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="form-bootstrap-percentile-cis-for-standardized-solution">Form Bootstrap Percentile CIs for Standardized Solution<a class="anchor" aria-label="anchor" href="#form-bootstrap-percentile-cis-for-standardized-solution"></a>
</h2>
<p>To form bootstrap percentile confidence intervals for the standardized solution, simply use <code><a href="../reference/standardizedSolution_boot_ci.html">standardizedSolution_boot_ci()</a></code> instead of <code><a href="https://rdrr.io/pkg/lavaan/man/standardizedSolution.html" class="external-link">lavaan::standardizedSolution()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/semhelpinghands/">semhelpinghands</a></span><span class="op">)</span></span>
<span><span class="va">ci_boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/standardizedSolution_boot_ci.html">standardizedSolution_boot_ci</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="va">ci_boot</span></span>
<span><span class="co">#&gt;     lhs op     rhs label est.std    se       z pvalue ci.lower ci.upper boot.ci.lower boot.ci.upper</span></span>
<span><span class="co">#&gt; 1     Y  ~       X     c   0.018 0.097   0.185  0.853   -0.172    0.207        -0.168         0.208</span></span>
<span><span class="co">#&gt; 2     M  ~       X     a   0.046 0.100   0.456  0.648   -0.150    0.241        -0.150         0.243</span></span>
<span><span class="co">#&gt; 3     Y  ~       M     b   0.102 0.102   1.001  0.317   -0.098    0.302        -0.095         0.297</span></span>
<span><span class="co">#&gt; 4     Y ~~       Y         0.989 0.021  48.205  0.000    0.949    1.029         0.898         0.999</span></span>
<span><span class="co">#&gt; 5     M ~~       M         0.998 0.009 109.591  0.000    0.980    1.016         0.941         1.000</span></span>
<span><span class="co">#&gt; 6     X ~~       X         1.000 0.000      NA     NA    1.000    1.000            NA            NA</span></span>
<span><span class="co">#&gt; 7    ab :=     a*b    ab   0.005 0.010   0.448  0.654   -0.016    0.025        -0.029         0.036</span></span>
<span><span class="co">#&gt; 8 total := c+(a*b) total   0.023 0.096   0.234  0.815   -0.167    0.212        -0.165         0.210</span></span></code></pre></div>
<p>The bootstrap percentile confidence intervals are appended to the right of the original output of <code><a href="https://rdrr.io/pkg/lavaan/man/standardizedSolution.html" class="external-link">lavaan::standardizedSolution()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
<p>The function <code><a href="../reference/standardizedSolution_boot_ci.html">standardizedSolution_boot_ci()</a></code> takes some time to run because it retrieves the estimates of the unstandardized solution in each bootstrap sample and computes the estimates in the standardized solution. Therefore, if 5,000 bootstrap samples are requested, this process is repeated 5,000 times. Nevertheless, it is still much faster than fitting the model 5,000 times again.</p>
</div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>This function was originally proposed in an <a href="https://github.com/simsem/semTools/issues/101#issue-1021974657" class="external-link">issue at GitHub</a>, inspired by a discussion at the <a href="https://groups.google.com/g/lavaan/c/qQBXSz5cd0o/m/R8YT5HxNAgAJ" class="external-link">Google group for lavaan</a>. It is not a versatile function and used some “tricks” to do the work. A more reliable way is to use function like <code><a href="https://rdrr.io/pkg/lavaan/man/bootstrap.html" class="external-link">lavaan::bootstrapLavaan()</a></code>. Nevertheless, this simple function is good enough for the cases I encountered in my work.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Shu Fai Cheung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
